# @Transactional

- Transaction 이란?
- Spring에서의 Transaction
- @Transactional의 동작원리

## Transaction 이란

데이터베이스의 상태 변화를 위해 수행하는 작업의 단위를 뜻합니다.
데이터베이스의 상태 변화란,

- SELECT
- INSERT
- DELETE
- UPDATE
  위와 같은 질의어들을 사용하여 데이터베이스에 접근하는 것을 의미합니다

#### Commit

하나의 트랜잭션이 성공적으로 끝나고, 데이터베이스가 일관성있는 상태라는 것을 알리는 연산을 말합니다

#### Rollback

하나의 트랜잭션이 비정상적으로 종료되어, 트랜잭션의 원자성이 깨진경우 연산된 결과를 취소시키는 연산을 말합니다

> 원자성이란, 트랜잭션이 데이터베이스에 모두 반영되던가, 아니면 전혀 반영되지 않아야 한다는 것

### Spring에서의 Transaction

Spring에서는 두가지 방법으로 트랜잭션을 사용합니다

- XML 파일을 이용한 설정
- @Transactional 어노테이션을 클래스, 메서드에 선언

최근에는 간편하게 어노테이션 기반으로 사용합니다

### @Transactional의 동작원리

트랜잭셔널 어노테이션은, Spring AOP를 통해 구현되어있습니다

- 어노테이션이 선언된 클래스 또는 메서드에 프록시객체 생성
- 프록시 객체는 어노테이션을 포함한 메서드가 호출될 경우 트랜잭션을 시작하고, 커밋 or 롤백 연산을 수행

또한 다음과 같은 우선순위를 가지고있습니다

```
클래스 메소드 > 클래스 > 인터페이스 메소드 > 인터페이스
```
